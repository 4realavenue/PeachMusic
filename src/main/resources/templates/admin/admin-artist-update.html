<!doctype html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>아티스트 수정 | PeachMusic Admin</title>

    <link rel="stylesheet" href="/css/design-system.css"/>
    <link rel="stylesheet" href="/css/layout.css" />
    <link rel="stylesheet" href="/css/admin-artist-update.css" />

    <script th:src="@{/js/sidebar.js}" defer></script>
    <!-- ✅ 실제 static 위치에 맞춰서: /static/js/admin-artist-update.js -->
    <script type="module" th:src="@{/js/admin-artist-update.js}" defer></script>
</head>

<body>
<div th:replace="~{fragments/layout :: mainLayout(~{::section})}">
    <section class="page">

        <header class="page-head">
            <div>
                <h1 class="page-title">아티스트 수정</h1>
                <p class="page-sub">기본 정보와 프로필 이미지는 각각 저장됩니다.</p>
            </div>

            <div class="page-actions">
                <a class="btn btn-ghost" th:href="@{/admin/artists}">목록으로</a>
            </div>
        </header>

        <!-- JS로 artistId 넘기기 -->
        <div id="artistMeta" th:attr="data-artist-id=${artist.artistId}"></div>

        <div class="grid">
            <!-- =======================
                 LEFT: IMAGE
            ======================== -->
            <article class="card">
                <div class="card-head">
                    <div>
                        <div class="card-title">프로필 이미지</div>
                        <div class="card-desc">jpg / jpeg / png 만 가능 (최대 5MB)</div>
                    </div>
                </div>

                <div class="card-body">
                    <div class="preview" id="imgBox">
                        <span class="badge">PROFILE</span>

                        <!-- ✅ 처음엔 항상 placeholder만 (서버 이미지 렌더링 X) -->
                        <div class="img-placeholder" id="imgPlaceholder">이미지 미리보기</div>
                    </div>

                    <!-- 실제 파일 input은 숨기고 버튼으로만 조작 -->
                    <input class="sr-only" id="profileImage" type="file"
                           accept="image/jpeg,image/jpg,image/png"/>

                    <div class="file-actions">
                        <button type="button" class="btn btn-ghost" id="btnPickImage">이미지 선택</button>
                        <button type="button" class="btn btn-ghost" id="btnResetImage">초기화</button>
                    </div>

                    <div class="file-hint" id="fileHint">선택된 파일 없음</div>

                    <button type="button" class="btn btn-primary btn-wide" id="btnSaveImage">이미지 저장</button>
                    <div class="help" id="imgHelp"></div>
                </div>
            </article>

            <!-- =======================
                 RIGHT: STACK
            ======================== -->
            <div class="stack">
                <!-- 현재 값 토글 -->
                <article class="card">
                    <div class="card-head">
                        <div>
                            <div class="card-title">현재 값</div>
                            <div class="card-desc">이 페이지는 서버 렌더링 값으로 표시됩니다.</div>
                        </div>
                        <button type="button" class="btn btn-ghost" id="btnToggleCurrent">현재 값 보기</button>
                    </div>

                    <div class="card-body" id="currentBody">
                        <div class="kv-grid">
                            <div class="kv"><div class="k">ID</div><div class="v" th:text="${artist.artistId}">-</div></div>
                            <div class="kv"><div class="k">이름</div><div class="v" th:text="${artist.artistName}">-</div></div>
                            <div class="kv"><div class="k">국가</div><div class="v" th:text="${artist.country}">-</div></div>
                            <div class="kv"><div class="k">유형</div><div class="v" th:text="${artist.artistType}">-</div></div>
                            <div class="kv"><div class="k">데뷔</div><div class="v" th:text="${artist.debutDate}">-</div></div>
                            <div class="kv"><div class="k">좋아요</div><div class="v" th:text="${artist.likeCount}">0</div></div>
                            <div class="kv">
                                <div class="k">상태</div>
                                <div class="v" th:text="${artist.isDeleted} ? '비활성' : '활성'">-</div>
                            </div>
                        </div>
                    </div>
                </article>

                <!-- 기본 정보 -->
                <article class="card">
                    <div class="card-head">
                        <div>
                            <div class="card-title">기본 정보</div>
                            <div class="card-desc">비워두면 해당 값은 수정되지 않습니다.</div>
                        </div>
                    </div>

                    <div class="card-body">
                        <div class="field">
                            <div class="label">아티스트명</div>
                            <input id="artistName" type="text" placeholder="예) 홍길동" />
                        </div>

                        <div class="row2">
                            <div class="field">
                                <div class="label">국가</div>
                                <input id="country" type="text" placeholder="예) KR" />
                            </div>
                            <div class="field">
                                <div class="label">타입</div>
                                <select id="artistType">
                                    <option value="">선택(옵션)</option>
                                    <!-- enum 값은 너 프로젝트에 맞게 추가 -->
                                    <option value="SOLO">SOLO</option>
                                    <option value="GROUP">GROUP</option>
                                </select>
                            </div>
                        </div>

                        <div class="field">
                            <div class="label">데뷔일</div>
                            <input id="debutDate" type="date" />
                            <div class="mini">형식: yyyy-MM-dd</div>
                        </div>

                        <div class="field">
                            <div class="label">소개</div>
                            <textarea id="bio" maxlength="500" placeholder="최대 500자"></textarea>
                            <div class="mini"><span id="bioCount">0</span>/500</div>
                        </div>

                        <div class="actions">
                            <button type="button" class="btn btn-ghost" id="btnCancelInfo">취소</button>
                            <button type="button" class="btn btn-primary" id="btnSaveInfo">저장</button>
                        </div>

                        <div class="help" id="infoHelp"></div>
                    </div>
                </article>
            </div>
        </div>

    </section>
</div>
</body>
</html>
