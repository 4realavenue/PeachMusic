<!doctype html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>음원 등록 | PeachMusic Admin</title>

    <link rel="stylesheet" href="/css/design-system.css"/>
    <link rel="stylesheet" href="/css/layout.css"/>
    <link rel="stylesheet" href="/css/admin-song-create.css"/>

    <script th:src="@{/js/sidebar.js}" defer></script>
    <script type="module" src="/js/admin-song-create.js" defer></script>
</head>

<body>
<div th:replace="~{fragments/layout :: mainLayout(~{::section})}">
    <section class="admin-create-page">

        <div class="page-head">
            <div class="page-head-left">
                <h1 class="page-title">음원 등록</h1>
                <p class="page-sub">
                    필수: 앨범ID / 수록번호 / 제목 / 음원파일 · 옵션: 장르ID목록, 언어, 속도, 보컬/연주 등
                </p>
            </div>

            <a class="ghost-top-btn" href="/admin/songs">목록으로</a>
        </div>

        <form id="songCreateForm" class="create-card">

            <!-- 좌: 음원 파일 -->
            <div class="file-pane">

                <div class="file-top-info">
                    <div class="file-title">음원 파일</div>
                    <div class="file-desc">mp3 / wav (최대 30MB)</div>
                </div>

                <div class="card-body">
                    <input id="audio" name="audio" type="file" accept="audio/*,.mp3,.wav" class="hidden"/>

                    <div class="file-actions">
                        <button type="button" class="btn" id="pickAudioBtn">파일 선택</button>
                        <button type="button" class="btn" id="clearAudioBtn">초기화</button>
                    </div>

                    <div class="file-hint" id="fileHint">선택된 파일 없음</div>
                    <div class="help" id="audioHelp"></div>
                </div>

            </div>

            <!-- 우: 기본 정보 -->
            <div class="form-pane">

                <div class="field">
                    <label class="label">제목 <span class="req">*</span></label>
                    <input class="input" type="text" name="name" placeholder="예) 안녕" required/>
                    <div class="mini-hint">409: 동일 제목 중복 불가</div>
                </div>

                <div class="grid2">
                    <div class="field">
                        <label class="label">앨범 ID <span class="req">*</span></label>
                        <input class="input" type="number" name="albumId" placeholder="예) 4457" required/>
                        <div class="mini-hint">404: 앨범이 존재하지 않으면 실패</div>
                    </div>

                    <div class="field">
                        <label class="label">수록 번호 <span class="req">*</span></label>
                        <input class="input" type="number" name="position" placeholder="예) 1" required/>
                        <div class="mini-hint">409: 동일 수록번호 중복 불가</div>
                    </div>
                </div>

                <div class="grid2">
                    <div class="field">
                        <label class="label">길이(초)</label>
                        <input class="input" type="number" name="duration" placeholder="예) 210"/>
                    </div>

                    <div class="field">
                        <label class="label">언어</label>
                        <input class="input" type="text" name="lang" placeholder="예) ko / en"/>
                    </div>
                </div>

                <div class="grid2">
                    <div class="field">
                        <label class="label">보컬/연주</label>
                        <input class="input" type="text" name="vocalinstrumental" placeholder="예) vocal"/>
                    </div>

                    <div class="field">
                        <label class="label">속도</label>
                        <input class="input" type="text" name="speed" placeholder="예) medium"/>
                    </div>
                </div>

                <div class="field">
                    <label class="label">라이선스 URL</label>
                    <input class="input" type="text" name="licenseCcurl" placeholder="https://..."/>
                </div>

                <div class="field">
                    <label class="label">악기(instruments)</label>
                    <input class="input" type="text" name="instruments" placeholder="예) guitar,piano"/>
                </div>

                <div class="field">
                    <label class="label">태그(vartags)</label>
                    <input class="input" type="text" name="vartags" placeholder="예) chill,night"/>
                </div>

                <div class="field">
                    <label class="label">장르 ID 목록</label>
                    <input class="input" type="text" name="genreIdList" placeholder="예) 1,3"/>
                    <div class="mini-hint">쉼표로 구분해서 입력 (예: 1,3)</div>
                </div>

                <div class="form-note">
                    * 파일 미첨부(400), 용량초과(400), 형식오류(400), 업로드 실패(500)는 서버 메시지를 그대로 보여줍니다.
                </div>

                <div class="actions-bottom">
                    <a class="btn" href="/admin/songs">취소</a>
                    <button class="primary-btn" type="submit" id="submitBtn">등록</button>
                </div>

            </div>

        </form>
    </section>
</div>
</body>
</html>
